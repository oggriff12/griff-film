<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Griff Is Back — Player</title>
<link rel="stylesheet" href="style.css">
<style>
  :root{--teal:#00e6d0;--orange:#ff6a00}
  html,body{height:100%;background:#000;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif;margin:0}
  .stage{position:fixed;inset:0;overflow:hidden;background:radial-gradient(1200px 600px at 50% 110%, #0b1220 0%, #05070c 60%, #000 100%)}
  .layer{position:absolute;inset:0;will-change:transform}
  .bg{filter:brightness(.9) saturate(1.05)}
  .city{opacity:.9}
  .char{position:absolute;bottom:2%; transform-origin:50% 90%; will-change:transform,opacity; filter:drop-shadow(0 12px 34px rgba(0,0,0,.6))}
  .caption{position:absolute;left:0;right:0;bottom:18px;margin:auto;max-width:min(980px,92%);text-align:center;
           font-size:clamp(16px,2.2vw,22px);line-height:1.35;text-shadow:0 2px 24px #000,0 0 6px rgba(0,0,0,.6)}
  .hud{position:fixed;left:12px;right:12px;top:12px;display:flex;gap:8px;justify-content:space-between;align-items:center;pointer-events:none}
  .hud .left,.hud .right{display:flex;gap:8px;pointer-events:auto}
  .btn{background:#151515;border:1px solid #2a2a2a;color:#ddd;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn.primary{background:linear-gradient(135deg,var(--orange),#ff9a2b);color:#111;border:none;font-weight:800}
  .tag{background:rgba(0,0,0,.45);border:1px solid #1f1f1f;border-radius:10px;padding:6px 10px;font-weight:700}
  .progress{position:fixed;left:0;right:0;bottom:0;height:6px;background:#0c0c0c}
  .bar{height:100%;width:0;background:var(--teal);transition:width .2s ease}
</style>
</head>
<body>
<div class="stage" id="stage">
  <canvas class="layer bg" id="bg"></canvas>
  <canvas class="layer city" id="city"></canvas>
  <div class="layer chars" id="chars"></div>
  <div class="caption" id="caption"></div>
</div>

<div class="hud">
  <div class="left">
    <div class="tag" id="who">—</div>
    <button class="btn" id="prev">⏮ Prev</button>
    <button class="btn primary" id="play">▶ Play</button>
    <button class="btn" id="pause">⏸ Pause</button>
    <button class="btn" id="next">⏭ Next</button>
  </div>
  <div class="right">
    <a class="btn" href="index.html">Home</a>
  </div>
</div>
<div class="progress"><div class="bar" id="bar"></div></div>

<!-- Load your base64 image variables (IMG_POSTER, IMG_SHELTER, IMG_STREETS) -->
<script src="episode1_images.js"></script>
<!-- Animation engine -->
<script src="episode-engine.js"></script>
<script>
  // Read ep number from query: /player.html?ep=1
  const ep = new URLSearchParams(location.search).get('ep') || '1';
  startEpisode(`/episodes/episode${ep}.json`);
</script>
</body>
</html>
